/*
 *  SPDX-License-Identifier: GPL-2.0-or-later
 *
 *  Copyright (C) 2020-2021  The DOSBox Staging Team
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along
 *  with this program; if not, write to the Free Software Foundation, Inc.,
 *  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 */

#ifndef DOSBOX_CONFIG_H
#define DOSBOX_CONFIG_H

/* Version and branding tweaks
 */

// Emulator version
#define VERSION "@version@"

// TODO make it a suffix, configurable via meson
#define CONF_BRAND "staging-git"

/* Operating System
 */

// Defined if compiling for OS from BSD family
#mesondefine BSD

// Defined if compiling for Linux (non-Android)
#mesondefine LINUX

// Defined if compiling for macOS
#mesondefine MACOSX

// Defined if compiling for Windows (any option)
#mesondefine WIN32

/* CPU and FPU emulation
 *
 * These defines are mostly relevant to modules src/cpu/ and src/fpu/
 */

// The type of cpu this target has
#mesondefine C_TARGETCPU

// Define to 1 if target CPU supports unaligned memory access
#mesondefine C_UNALIGNED_MEMORY

// Define to 1 to use x86/x86_64 dynamic cpu core
// Can not be used together with C_DYNREC
#mesondefine C_DYNAMIC_X86

// Define to 1 to use recompiling cpu core
// Can not be used together with C_DYNAMIC_X86
#mesondefine C_DYNREC

// Define to 1 to enable floating point emulation
#mesondefine C_FPU

// Define to 1 to use  fpu core implemented in x86 assembler
#mesondefine C_FPU_X86

// TODO Define to 1 to use inlined memory functions in cpu core
#define C_CORE_INLINE 1

/* Emulator features
 *
 * Turn on or off optional emulator features that depend on external libraries.
 * This way it's easier to port or package on a new platform, where these
 * libraries might be missing.
 */

// Define to 1 to enable internal modem emulation (using SDL2_net)
#mesondefine C_MODEM

// Define to 1 to enable IPX over Internet networking (using SDL2_net)
#mesondefine C_IPX

// Enable serial port passthrough support
#if defined(LINUX) || defined(WIN32) || defined(MACOSX) || defined(BSD)
#define C_DIRECTSERIAL 1
#endif

// Define to 1 to use opengl display output support
#mesondefine C_OPENGL

// Define to 1 to enable FluidSynth integration (built-in MIDI synth)
#mesondefine C_FLUIDSYNTH

// Define to 1 to enable screenshots in .png format
#mesondefine C_SSHOT

// Define to 1 to enable internal debugger (using ncurses or pdcurses)
#mesondefine C_DEBUG

// Define to 1 to enable heavy debugging (requires C_DEBUG)
#mesondefine C_HEAVY_DEBUG

// Define to 1 to enable MT-32 emulator
#define C_MT32EMU 0

/* Compiler features and extensions
 *
 * These are defines for compiler features we can't reliably verify during
 * compilation time.
 */

// TODO generate ; support for __attribute__ syntax
#define C_HAS_ATTRIBUTE 1

// TODO generate ; support for __builtin_expect
#define C_HAS_BUILTIN_EXPECT 1

/* Quirks and toggles for standard headers, libraries, hardware-related
 * defines, etc.
 *
 * Sometimes available functions, structs, or struct fields differ slightly
 * between operating systems.
 */

// Defined if function clock_gettime is available
#mesondefine HAVE_CLOCK_GETTIME

// Defined if function mprotect is available
#mesondefine HAVE_MPROTECT

// Defined if function realpath is available
#mesondefine HAVE_REALPATH

// field d_type in struct dirent is not defined in POSIX
// Some OSes do not implement it (e.g. Haiku)
#mesondefine HAVE_STRUCT_DIRENT_D_TYPE

// Defines for header availability
#mesondefine HAVE_NETINET_IN_H
#mesondefine HAVE_PWD_H
#define HAVE_STDLIB_H 1
#mesondefine HAVE_STRINGS_H
#mesondefine HAVE_SYS_SOCKET_H
#define HAVE_SYS_TYPES_H 1

// Define to 1 when host/target processor uses big endian byte ordering
#mesondefine WORDS_BIGENDIAN

// Non-4K page size (only on selected architectures)
#mesondefine PAGESIZE

#endif
